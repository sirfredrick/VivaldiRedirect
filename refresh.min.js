// Copyright 2019 Jeffrey Tucker

// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at

//     http://www.apache.org/licenses/LICENSE-2.0

// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

window.addEventListener("load",async function(event){var count=0;var didRefresh=false;var refreshBtn=document.getElementById("refresh");var style=document.getElementById("style");var buttonIcon=document.getElementById("buttonIcon");chrome.storage.sync.get('didRefresh',async function(data){if(data.didRefresh){style.setAttribute("href","https://code.getmdl.io/1.3.0/material.green-purple.min.css");if(refreshBtn){buttonIcon.setAttribute("src","https://i.imgur.com/o1VarMX.png")}}else{style.setAttribute("href","material.min.css");if(refreshBtn){buttonIcon.setAttribute("src","buttonIcon.png")}}});if(refreshBtn){refreshBtn.addEventListener("click",async function(event){var background=chrome.extension.getBackgroundPage();background.log(count);count+=1;if(count>10){chrome.storage.sync.get('didRefresh',async function(data){didRefresh=data.didRefresh;background.log(data.didRefresh);var style=document.getElementById("style");if(!didRefresh){style.setAttribute("href","https://code.getmdl.io/1.3.0/material.green-purple.min.css");buttonIcon.setAttribute("src","buttonIcon2.png");await background.saveRefresh(true)}else{style.setAttribute("href","material.min.css");buttonIcon.setAttribute("src","buttonIcon.png");await background.saveRefresh(false)}});count=0;window.location.reload()}})}});